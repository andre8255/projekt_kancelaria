{% extends "base_panel.html" %}
{% block content %}

<div class="container py-4">
  <h3 class="mb-4">
    <i class="bi bi-search"></i> Wyniki wyszukiwania
    {% if q %}<small class="text-muted">dla: "{{ q }}"</small>{% endif %}
  </h3>

  {% if not q %}
    <p>Wpisz tekst w polu wyszukiwania w górnym pasku.</p>
  {% else %}
    <div class="row">
      {# LEWA KOLUMNA – OSOBY #}
      <div class="col-md-6 mb-4">
        <h5>Osoby ({{ wyniki_osoby|length }})</h5>
        <ul class="list-group">
          {% for o in wyniki_osoby %}
            <li class="list-group-item">
              <a href="{% url 'osoba_szczegoly' o.pk %}">
                {{ o.imie_pierwsze }} {{ o.nazwisko }}
              </a>
              {% if o.data_urodzenia %}
                <span class="text-muted small">
                  &nbsp;– ur. {{ o.data_urodzenia|date:"Y-m-d" }}
                </span>
              {% endif %}
            </li>
          {% empty %}
            <li class="list-group-item text-muted">Brak wyników</li>
          {% endfor %}
        </ul>
      </div>

      {# PRAWA KOLUMNA – RODZINY + POCHOWANI #}
      <div class="col-md-6 mb-4">

        {# RODZINY #}
        <h5>Rodziny ({{ wyniki_rodziny|length }})</h5>
        <ul class="list-group mb-4">
          {% for r in wyniki_rodziny %}
            <li class="list-group-item">
              <a href="{% url 'rodzina_szczegoly' r.pk %}" class="fw-semibold">
                {{ r.nazwa }}
              </a>
              <span class="small text-muted">
                &nbsp;– ul. {{ r.ulica }} {{ r.nr_domu }}{% if r.nr_mieszkania %}/{{ r.nr_mieszkania }}{% endif %}
              </span>
            </li>
          {% empty %}
            <li class="list-group-item text-muted">Brak wyników</li>
          {% endfor %}
        </ul>

        {# POCHOWANI NA CMENTARZU #}
        <h5>Pochowani na cmentarzu ({{ wyniki_pochowani|length }})</h5>
        <ul class="list-group">
          {% for p in wyniki_pochowani %}
            <li class="list-group-item">
              <a href="{% url 'osoba_szczegoly' p.osoba.pk %}">
                {{ p.osoba.imie_pierwsze }} {{ p.osoba.nazwisko }}
              </a>
              <span class="small text-muted">
                &nbsp;– grób: sektor {{ p.grob.sektor }},
                rząd {{ p.grob.rzad }},
                nr {{ p.grob.numer }}
                (&nbsp;<a href="{% url 'cmentarz:grob_szczegoly' p.grob.pk %}">karta grobu</a>&nbsp;)
              </span>
            </li>
          {% empty %}
            <li class="list-group-item text-muted">Brak wyników</li>
          {% endfor %}
        </ul>

      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
