{% extends "base_print.html" %}
{% block title %}Kartoteka Rodziny{% endblock %}

{% block content %}
<style>
    .header {
        text-align: center;
        margin-bottom: 1cm;
        border-bottom: 2px solid #000;
        padding-bottom: 10px;
    }
    .header h1 {
        margin: 0;
        font-size: 18pt;
        text-transform: uppercase;
    }
    .header h2 {
        margin: 5px 0 0 0;
        font-size: 14pt;
        font-weight: normal;
    }
    .info-box {
        margin-bottom: 1cm;
    }
    .info-row {
        margin-bottom: 5px;
        font-size: 11pt;
    }
    .label {
        font-weight: bold;
        display: inline-block;
        width: 120px;
    }
    
    /* Tabela członków */
    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 10pt;
    }
    th, td {
        border: 1px solid #000;
        padding: 6px;
        text-align: center; /* Środek dla krzyżyków */
    }
    th {
        background-color: #eee;
        font-weight: bold;
    }
    td.align-left {
        text-align: left;
    }
    .sakrament-tak {
        font-weight: bold;
        font-size: 1.2em;
    }
    .uwagi-sekcja {
        margin-top: 1cm;
        border: 1px solid #ccc;
        padding: 10px;
        min-height: 3cm;
    }
</style>

<div class="header">
    <h1>Kartoteka Rodziny</h1>
    <h2>{{ rodzina.nazwa }}</h2>
</div>

<div class="info-box">
    <div class="info-row">
        <span class="label">Adres:</span>
        {{ rodzina.ulica }} {{ rodzina.nr_domu }}{% if rodzina.nr_mieszkania %}/{{ rodzina.nr_mieszkania }}{% endif %}
        {% if rodzina.kod_pocztowy %}, {{ rodzina.kod_pocztowy }}{% endif %}
        {{ rodzina.miejscowosc }}
    </div>
    {% if rodzina.telefon_kontaktowy %}
    <div class="info-row">
        <span class="label">Telefon:</span> {{ rodzina.telefon_kontaktowy }}
    </div>
    {% endif %}
    {% if rodzina.email_kontaktowy %}
    <div class="info-row">
        <span class="label">Email:</span> {{ rodzina.email_kontaktowy }}
    </div>
    {% endif %}
</div>

<h3>Członkowie rodziny</h3>

<table>
    <thead>
        <tr>
            <th style="width: 5%;">Lp.</th>
            <th style="width: 35%;">Imię i Nazwisko</th>
            <th style="width: 15%;">Data ur.</th>
            <th style="width: 15%;">Rola</th>
            <th style="width: 7%;">Chrz.</th>
            <th style="width: 7%;">I Kom.</th>
            <th style="width: 7%;">Bierz.</th>
            <th style="width: 7%;">Małż.</th>
        </tr>
    </thead>
    <tbody>
        {% for item in czlonkowie_posortowani %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td class="align-left">
                <strong>{{ item.osoba.imie_pierwsze }}</strong> {{ item.osoba.nazwisko }}
            </td>
            <td>{{ item.osoba.data_urodzenia|default:"-" }}</td>
            <td>{{ item.relacja.get_rola_display }}</td>
            
            <td>{% if item.sakramenty.chrzest %}<span class="sakrament-tak">X</span>{% endif %}</td>
            <td>{% if item.sakramenty.komunia %}<span class="sakrament-tak">X</span>{% endif %}</td>
            <td>{% if item.sakramenty.bierzmowanie %}<span class="sakrament-tak">X</span>{% endif %}</td>
            <td>{% if item.sakramenty.malzenstwo %}<span class="sakrament-tak">X</span>{% endif %}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if rodzina.uwagi %}
<div class="uwagi-sekcja">
    <strong>Uwagi:</strong><br>
    {{ rodzina.uwagi|linebreaksbr }}
</div>
{% endif %}

<div style="margin-top: 1cm; font-size: 9pt; text-align: right;">
    Data wydruku: {{ today|date:"d.m.Y" }}
</div>

{% endblock %}