{% extends "base_panel.html" %}
{% block content %}

<div class="d-flex justify-content-between align-items-start flex-wrap gap-2 mb-3">
  <div>
    <h1 class="h5 mb-1">
      Usuń z rodziny
    </h1>
    <div class="text-muted small">
      Czy na pewno chcesz wypisać tę osobę z kartoteki rodziny?
    </div>
  </div>
</div>

<div class="card shadow-sm border-0 mb-4">
  <div class="card-body small">

    <p>
      <strong>Rodzina:</strong><br>
      {{ czlonkostwo.rodzina.nazwa }}
      <br>
      <span class="text-muted">
        {{ czlonkostwo.rodzina.ulica }} {{ czlonkostwo.rodzina.nr_domu }}{% if czlonkostwo.rodzina.nr_mieszkania %}/{{ czlonkostwo.rodzina.nr_mieszkania }}{% endif %},
        {{ czlonkostwo.rodzina.kod_pocztowy }} {{ czlonkostwo.rodzina.miejscowosc }}
      </span>
    </p>

    <p class="mt-3">
      <strong>Osoba:</strong><br>
      {{ czlonkostwo.osoba.nazwisko }} {{ czlonkostwo.osoba.imie_pierwsze }}
      {% if czlonkostwo.osoba.data_urodzenia %}
        <span class="text-muted small">
          (ur. {{ czlonkostwo.osoba.data_urodzenia }})
        </span>
      {% endif %}
    </p>

    <p class="mt-3">
      <strong>Rola w rodzinie:</strong><br>
      {% if czlonkostwo.rola %}
        {{ czlonkostwo.get_rola_display }}
      {% else %}
        <span class="text-muted">—</span>
      {% endif %}
    </p>

    <p class="mt-3">
      <strong>Status zamieszkania:</strong><br>
      {% if czlonkostwo.status %}
        {{ czlonkostwo.get_status_display }}
      {% else %}
        <span class="text-muted">—</span>
      {% endif %}
    </p>

    {% if czlonkostwo.uwagi %}
      <p class="mt-3">
        <strong>Uwagi:</strong><br>
        <span style="white-space: pre-line;">{{ czlonkostwo.uwagi }}</span>
      </p>
    {% endif %}

    <div class="alert alert-warning mt-4 small">
      Ta operacja usuwa wyłącznie przypisanie osoby do tej rodziny.
      <br>
      <strong>Nie usuwa osoby z bazy i nie usuwa rodziny.</strong>
    </div>

  </div>
</div>

<form method="post" class="d-flex flex-wrap gap-2">
  {% csrf_token %}

  <a href="{{ czlonkostwo.rodzina.get_absolute_url }}" class="btn btn-outline-secondary btn-sm">
    Anuluj
  </a>

  <button type="submit" class="btn btn-danger btn-sm">
    Usuń z rodziny
  </button>
</form>

{% endblock %}
