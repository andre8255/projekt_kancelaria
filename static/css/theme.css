/* ============================
   MOTYWY – ZMIENNE KOLORÓW
   ============================ */

/* Jasny motyw (domyślny) */
html[data-theme="light"],
html:not([data-theme]) {
  --kp-bg: #f5f5f5;
  --kp-bg-alt: #ffffff;
  --kp-text: #212529;
  --kp-text-muted: #6c757d;
  --kp-border: #dee2e6;

  --kp-nav-bg: #ffffff;
  --kp-nav-border: #dee2e6;
  --kp-nav-text: #212529;

  --kp-link: #0d6efd;
  --kp-link-hover: #0b5ed7;

  /* Tabele */
  --kp-table-head-bg: #e9ecef;
  --kp-table-row-alt: #f1f3f5;
  --kp-table-hover: #e2e6ea;
}

/* Ciemny motyw */
html[data-theme="dark"] {
  --kp-bg: #050608;
  --kp-bg-alt: #111827;      /* było #1c1f26 – teraz ciemniej */
  --kp-text: #f8f9fa;
  --kp-text-muted: #adb5bd;
  --kp-border: #343a40;

  --kp-nav-bg: #020617;      /* navbar jeszcze ciemniejszy */
  --kp-nav-border: #111827;
  --kp-nav-text: #f9fafb;

  --kp-link: #4dabf7;
  --kp-link-hover: #74c0fc;

  /* Tabele */
  --kp-table-head-bg: #232732;
  --kp-table-row-alt: #181b22;
  --kp-table-hover: #2c3240;
}

/* ============================
   PODSTAWOWE TŁO I TEKST
   ============================ */

body {
  background-color: var(--kp-bg) !important;
  color: var(--kp-text) !important;
}

/* Dla bezpieczeństwa – bootstrapowe klasy tła */
.bg-light {
  background-color: var(--kp-bg-alt) !important;
}

.bg-white {
  background-color: var(--kp-bg-alt) !important;
}

/* ============================
   NAVBAR / HEADER
   ============================ */

.navbar {
  background-color: var(--kp-nav-bg) !important;
  border-color: var(--kp-nav-border) !important;
}

.navbar.bg-white {
  background-color: var(--kp-nav-bg) !important;
}

.navbar,
.navbar a,
.navbar-brand,
.navbar-nav .nav-link {
  color: var(--kp-nav-text) !important;
}

/* Aktywny link w navbarze */
.navbar-nav .nav-link.active,
.navbar-nav .nav-link.show {
  font-weight: 600;
}

/* ============================
   LINKI, TEKST
   ============================ */

a {
  color: var(--kp-link);
}

a:hover {
  color: var(--kp-link-hover);
}

.text-muted {
  color: var(--kp-text-muted) !important;
}

/* ============================
   KARTY, ALERTY, MODALE, LISTY
   ============================ */

.card,
.list-group-item,
.alert,
.dropdown-menu,
.modal-content {
  background-color: var(--kp-bg-alt) !important;
  color: var(--kp-text) !important;
  border-color: var(--kp-border) !important;
}

.alert {
  border-width: 1px;
}

/* ============================
   FORMULARZE
   ============================ */

.form-control,
.form-select,
.form-check-input {
  background-color: var(--kp-bg-alt);
  color: var(--kp-text);
  border-color: var(--kp-border);
}

.form-control:focus,
.form-select:focus {
  box-shadow: 0 0 0 0.15rem rgba(13, 110, 253, 0.25);
}

.form-control::placeholder {
  color: var(--kp-text-muted);
}

/* ============================
   TABELKI
   ============================ */

/* Kontener tabeli */
.table {
  background-color: transparent !important;
  color: var(--kp-text) !important;
}

/* Nagłówek tabeli */
.table thead th {
  background-color: var(--kp-table-head-bg) !important;
  color: var(--kp-text) !important;
  border-color: var(--kp-border) !important;
}

/* .table-light – żeby nie psuło ciemnego motywu */
.table-light,
.table-light > th,
.table-light > td {
  background-color: var(--kp-table-head-bg) !important;
  color: var(--kp-text) !important;
  border-color: var(--kp-border) !important;
}

/* Wiersze – tło */
.table tbody tr {
  background-color: var(--kp-bg-alt) !important;
}

/* KOMÓRKI – środek tabeli */
.table tbody td {
  background-color: var(--kp-bg-alt) !important;
  color: var(--kp-text) !important;
  border-color: var(--kp-border) !important;
}

/* Paskowanie (gdy użyjesz .table-striped) */
.table-striped tbody tr:nth-of-type(odd) td {
  background-color: var(--kp-table-row-alt) !important;
}

/* Hover (gdy użyjesz .table-hover) */
.table-hover tbody tr:hover td {
  background-color: var(--kp-table-hover) !important;
}

/* Granice komórek */
.table td,
.table th {
  border-color: var(--kp-border) !important;
}

/* ============================
   DROPDOWNY / MENU
   ============================ */

.dropdown-menu {
  border: none;
  box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
  border-radius: 0.5rem;
}

.dropdown-item {
  color: var(--kp-text);
}

/* Active w dropdownie – bazuje na kolorze linku */
.dropdown-item:active {
  background-color: var(--kp-link) !important;
  color: #ffffff !important;
}

/* ============================
   PRZYCISK MOTYWU
   ============================ */

#theme-toggle {
  border-width: 1px;
  font-size: 1.1rem;
  line-height: 1;
  padding: 0.25rem 0.5rem;
  background-color: transparent;
}

#theme-toggle:focus {
  outline: none;
  box-shadow: none;
}

/* =============== DOPIESZCZENIE CIEMNEGO MOTYWU =============== */

/* Navbar i dropdowny mniej „świecące” */
html[data-theme="dark"] .navbar,
html[data-theme="dark"] .navbar.bg-white {
  background-color: var(--kp-nav-bg) !important;
  border-color: var(--kp-nav-border) !important;
}

html[data-theme="dark"] .dropdown-menu {
  background-color: #020617 !important;   /* bardzo ciemne */
  color: var(--kp-text) !important;
  border-color: var(--kp-border) !important;
}

html[data-theme="dark"] .dropdown-item {
  color: var(--kp-text) !important;
}

html[data-theme="dark"] .dropdown-item:hover,
html[data-theme="dark"] .dropdown-item:focus {
  background-color: #111827 !important;
  color: var(--kp-text) !important;
}

/* mniej „agresywne” zaznaczenie w menu */
html[data-theme="dark"] .dropdown-item:active {
  background-color: #1d2838 !important;
  color: var(--kp-text) !important;
}

/* Pola formularzy – ciemniejsze tło również po wypełnieniu/fokusie */
html[data-theme="dark"] .form-control,
html[data-theme="dark"] .form-select,
html[data-theme="dark"] .form-control:focus,
html[data-theme="dark"] .form-select:focus {
  background-color: #111827 !important;
  color: var(--kp-text) !important;
  border-color: #3b4252 !important;
  box-shadow: 0 0 0 0.12rem rgba(77, 171, 247, 0.35) !important;
}

html[data-theme="dark"] .form-control::placeholder {
  color: var(--kp-text-muted) !important;
}

/* Autofill (Chrome/Edge) – żeby nie było żółtej plamy */
html[data-theme="dark"] input:-webkit-autofill,
html[data-theme="dark"] textarea:-webkit-autofill,
html[data-theme="dark"] select:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 30px #111827 inset !important;
  -webkit-text-fill-color: var(--kp-text) !important;
}

/* Badge'y subtelne też w ciemnym motywie */
html[data-theme="dark"] .bg-success-subtle {
  background-color: rgba(25,135,84,0.18) !important;
  color: #8ff0a4 !important;
}

html[data-theme="dark"] .bg-danger-subtle {
  background-color: rgba(220,53,69,0.2) !important;
  color: #ffb3c0 !important;
}

/* ============================
   TWARDY RESET INPUTÓW W CIEMNYM MOTYWIE
   ============================ */

html[data-theme="dark"] input,
html[data-theme="dark"] select,
html[data-theme="dark"] textarea {
  background-color: #111827 !important;
  color: var(--kp-text) !important;
  border-color: #3b4252 !important;
}

html[data-theme="dark"] input:focus,
html[data-theme="dark"] select:focus,
html[data-theme="dark"] textarea:focus {
  background-color: #111827 !important;
  color: var(--kp-text) !important;
  border-color: #4dabf7 !important;
  box-shadow: 0 0 0 0.12rem rgba(77, 171, 247, 0.35) !important;
}

/* Autofill (Chrome/Edge) – usuwa żółte pole */
html[data-theme="dark"] input:-webkit-autofill,
html[data-theme="dark"] textarea:-webkit-autofill,
html[data-theme="dark"] select:-webkit-autofill {
  -webkit-box-shadow: 0 0 0 30px #111827 inset !important;
  -webkit-text-fill-color: var(--kp-text) !important;
}

/* ============================
   AUTOFILL – CIEMNY MOTYW
   ============================ */

/* Chrome / Edge (WebKit) */
html[data-theme="dark"] input:-webkit-autofill,
html[data-theme="dark"] input:-webkit-autofill:hover,
html[data-theme="dark"] input:-webkit-autofill:focus,
html[data-theme="dark"] textarea:-webkit-autofill,
html[data-theme="dark"] textarea:-webkit-autofill:hover,
html[data-theme="dark"] textarea:-webkit-autofill:focus,
html[data-theme="dark"] select:-webkit-autofill,
html[data-theme="dark"] select:-webkit-autofill:hover,
html[data-theme="dark"] select:-webkit-autofill:focus {
  /* tło pola – zamiast żółtego */
  -webkit-box-shadow: 0 0 0 1000px #111827 inset !important;
  background-color: #111827 !important;

  /* kolor tekstu i kursora */
  -webkit-text-fill-color: #f8f9fa !important;
  caret-color: #f8f9fa !important;

  /* obramowanie jak przy fokusie */
  border-color: #4dabf7 !important;
}

/* Firefox */
html[data-theme="dark"] input:-moz-autofill,
html[data-theme="dark"] textarea:-moz-autofill,
html[data-theme="dark"] select:-moz-autofill {
  box-shadow: 0 0 0 1000px #111827 inset !important;
  background-color: #111827 !important;
  color: #f8f9fa !important;
  caret-color: #f8f9fa !important;
  border-color: #4dabf7 !important;
}
